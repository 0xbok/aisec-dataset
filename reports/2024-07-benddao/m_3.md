## [M] If an isolated borrower/bidder is blacklisted by the debt token, risk of DOS liquidation/auction of the corresponding loan

If a debt asset has a blacklisting feature (e.g., USDC), and an isolated borrower/bidder is blacklisted by the asset token, isolated liquidation/auction of the corresponding loan can be DOSsed.

When a user is blacklisted by an erc20 token, the asset cannot be transferred in or out of the blacklisted user’s account.

1. A bidder is blacklisted after they placed the bid for an isolated loan auction through `IsolateLogic::executeIsolateAuction`.

When the next bidder outbids by calling `IsolateLogic::executeIsolateAuction`, the previous bidder’s bid amount is returned. Because previous bidder is blacklisted after placing the bid, `VaultLogic.erc20TransferOutBidAmount(debtAssetData, vars.oldLastBidder, vars.oldBidAmount)` will revert the auction tx. At this point, no one can bid on the loan.

```solidity
//src/libraries/logic/IsolateLogic.sol

  function executeIsolateAuction(InputTypes.ExecuteIsolateAuctionParams memory params) internal {
...
      // transfer last bid amount to previous bidder from escrow
      if ((vars.oldLastBidder != address(0)) && (vars.oldBidAmount > 0)) {
        VaultLogic.erc20TransferOutBidAmount(debtAssetData, vars.oldLastBidder, vars.oldBidAmount);
      }
...
```

[IsolateLogic.sol#L262](repos/2024-07-benddao/src/libraries/logic/IsolateLogic.sol#L262)

2. The borrower is blacklisted by the debt token.

After the auction ends, when the liquidator calls `executeIsolateLiquidate()`, if the last bid amount is greater than total debt, the extra amount (last bid amount - total debt) has to be transferred to the borrower in the current implementation.

```solidity
//src/libraries/logic/IsolateLogic.sol

  function executeIsolateLiquidate(InputTypes.ExecuteIsolateLiquidateParams memory params) internal {
...
      // transfer remain amount to borrower
      if (vars.remainBidAmounts[vars.nidx] > 0) {
        VaultLogic.erc20TransferOutBidAmount(debtAssetData, tokenData.owner, vars.remainBidAmounts[vars.nidx]);
      }
...
```

[IsolateLogic.sol#L444](repos/2024-07-benddao/src/libraries/logic/IsolateLogic.sol#L444)

However, `VaultLogic.erc20TransferOutBidAmount(debtAssetData, tokenData.owner, vars.remainBidAmounts[vars.nidx])` will revert due to the original borrower (`tokenData.owner`) is blacklisted.



