## [M] `WhenNotPaused` modifier in the CDPVault can be bypassed by users

<relative_path_091409:src/CDPVault.sol#L223-L233>

<relative_path_091409:src/CDPVault.sol#L239-L249>

### Impact

Users can still execute deposit and withdraw functions when the CDPVault.sol is paused as against the design expectation by just calling the `modifyCollateralAndDebt(...)` function with the necessary parameters.

### Proof of Concept

By design it is expected that when the CDPVault.sol contract is paused by the Dao, the deposits and withdrawals cannot be made due to the `whenNotPaused` modifier on the `deposit` and `withdraw` functions. However, the pause mechanism can be bypassed by users to deposit or withdraw on the CDPVault contract by directly calling the `modifyCollateralAndDebt(...)` function since it is public since it is the same function that is called by the `deposit` and `withdraw` functions.

Both the deposit and withdraw functions of the CDPVault.sol only make simple calculations before calling the public `modifyCollateralAndDebt(...)` function. This allows any user to directly call the `modifyCollateralAndDebt(...)` function when the CDPVault.sol contract is paused.

```solidity
File: CDPVault.sol
function deposit(address to, uint256 amount) external whenNotPaused returns (uint256 tokenAmount) {
        tokenAmount = wdiv(amount, tokenScale);
        int256 deltaCollateral = toInt256(tokenAmount);
@>        modifyCollateralAndDebt({
            owner: to,
            collateralizer: msg.sender,
            creditor: msg.sender,
            deltaCollateral: deltaCollateral,
            deltaDebt: 0
        });
    }

function withdraw(address to, uint256 amount) external whenNotPaused returns (uint256 tokenAmount) {
        tokenAmount = wdiv(amount, tokenScale);
        int256 deltaCollateral = -toInt256(tokenAmount);
@>        modifyCollateralAndDebt({
            owner: to,
            collateralizer: msg.sender,
            creditor: msg.sender,
            deltaCollateral: deltaCollateral,
            deltaDebt: 0
        });
    }

 function modifyCollateralAndDebt(
        address owner,
        address collateralizer,
        address creditor,
        int256 deltaCollateral,
        int256 deltaDebt
    ) public {
...

  }
```



