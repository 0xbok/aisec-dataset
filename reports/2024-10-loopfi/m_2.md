## [M] Invalid handling of risdual amount in `PositionAction::onCreditFlashLoan`, forcing it to revert

Users can call `PositionAction::decreaseLever` through a proxy, to "Decrease the leverage of a position by taking out a credit flash loan to withdraw and sell collateral". After it is called, the flash loan lender sends the credit and calls `onCreditFlashLoan`, which handles all that logic. When doing so, users are supposed to swap their collateral withdrawn into debt tokens so that the flash loan can be repaid.

The protocol tries to handle the residual amount from the swap (`swapped - paid debt`), by trying to repay extra debt for the designated position, using:

[PositionAction.sol#L491-L500](src/proxy/PositionAction.sol#L491-L500):
```solidity
if (residualAmount > 0) {
    underlyingToken.forceApprove(address(leverParams.vault), residualAmount);
    ICDPVault(leverParams.vault).modifyCollateralAndDebt(
        leverParams.position,
        address(this),
        address(this),
        0,
        -toInt256(residualAmount)
    );
}
```

However, this is invalid for 2 main reasons:

1. This is trying to repay extra debt than what the user is trying to, which is passed in the `primarySwap.amount`.
2. If the user tries to repay his whole debt using `decreaseLever` the TX will revert, as it'll try to repay some nonexistent debt.